### 📌 Pandas에서 컬럼 순서 보장하는 방법

Pandas에서는 `DataFrame`을 조작할 때 컬럼 순서가 유지되지 않는 경우가 있을 수 있습니다.  
특정 작업을 수행한 후에도 컬럼 순서를 유지하려면 아래 방법들을 사용할 수 있습니다. ✅

---

## ✅ 1. `DataFrame` 생성 시 컬럼 순서 지정
가장 기본적인 방법은 `DataFrame`을 만들 때 컬럼 순서를 명확하게 지정하는 것입니다.
```python
import pandas as pd

data = {
    "이름": ["철수", "영희", "민수"],
    "나이": [25, 30, 22],
    "성별": ["남", "여", "남"]
}

df = pd.DataFrame(data, columns=["이름", "나이", "성별"])  # 컬럼 순서 지정
print(df)
```
✅ `columns` 매개변수를 사용하면 **컬럼 순서가 보장**됩니다.

---

## ✅ 2. 컬럼을 재정렬 (`df.reorder_levels()` or `.loc`)
### 2-1. `df[리스트]` 방식
```python
df = df[["이름", "성별", "나이"]]  # 원하는 컬럼 순서로 변경
print(df)
```
이렇게 하면 **컬럼 순서가 강제로 유지**됩니다.

### 2-2. `.loc` 방식
```python
df = df.loc[:, ["이름", "성별", "나이"]]
print(df)
```
✅ `.loc[:, 컬럼리스트]`를 사용하면 **원하는 순서로 컬럼을 가져올 수 있음**.

---

## ✅ 3. 데이터 조작 후 컬럼 순서 유지하는 방법

### 3-1. 컬럼 추가 후 순서 유지 (`df.insert()`)
`df["새컬럼"] = 값` 방식으로 추가하면 컬럼이 마지막에 추가되지만,  
`df.insert(위치, 컬럼명, 값)`을 사용하면 **원하는 위치에 컬럼을 삽입**할 수 있습니다.
```python
df.insert(1, "국적", "한국")  # '국적' 컬럼을 두 번째 위치(1번째 인덱스)에 삽입
print(df)
```

### 3-2. `df.assign()` 사용
```python
df = df.assign(국적="한국")[["이름", "국적", "성별", "나이"]]
print(df)
```
✅ `.assign()`은 **새 컬럼을 추가하면서 컬럼 순서도 직접 지정 가능**.

---

## ✅ 4. 컬럼 순서 유지하면서 파일 저장 & 불러오기
### 4-1. CSV 파일 저장할 때 컬럼 순서 유지
```python
df.to_csv("data.csv", index=False, columns=["이름", "성별", "나이"])
```
✅ `columns` 옵션을 명시하면 **CSV 파일에서도 컬럼 순서가 유지됨**.

### 4-2. CSV 파일 읽을 때 컬럼 순서 지정
```python
df = pd.read_csv("data.csv", usecols=["이름", "성별", "나이"])
```
✅ `usecols` 옵션을 사용하면 **불러올 때 컬럼 순서를 지정할 수 있음**.

---

## ✅ 5. 컬럼이 섞였을 때 정렬을 유지하는 법
데이터 처리 중 컬럼 순서가 섞였다면, 기존 순서를 유지하려면 **리스트로 강제 정렬**하면 됩니다.
```python
desired_order = ["이름", "성별", "나이"]  # 원하는 컬럼 순서
df = df[desired_order]  # 순서 강제 적용
print(df)
```

---

## 🎯 결론
✅ 컬럼 순서를 유지하려면?
1. `DataFrame` 생성 시 `columns` 옵션 사용
2. `.loc[:, 리스트]` 또는 `df[리스트]`로 컬럼 순서 강제 적용
3. `.insert()` 또는 `.assign()`을 사용하여 원하는 위치에 컬럼 추가
4. `.to_csv(columns=리스트)`로 저장하고, `.read_csv(usecols=리스트)`로 불러오기
5. 컬럼 순서가 변경되면 리스트로 다시 정렬 (`df[리스트]`)

이 방법들을 활용하면 **어떤 상황에서도 컬럼 순서를 보장**할 수 있습니다! 🚀
